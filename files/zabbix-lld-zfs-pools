#!/usr/bin/env python3
#
# Managed by ansible (mit.zabbix-agent.check-upgrades)
# DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN

import json
import subprocess

data = list()

# Path `/sbin` is needed on Linux
pools = subprocess.run(['/sbin/zpool', 'list', '-H', '-o', 'name'], capture_output=True, text=True)
for pool in pools.stdout.splitlines():
    data.append({
        "{#POOLNAME}": pool
    })

else:
    print(json.dumps({"data": data}, indent=4))
